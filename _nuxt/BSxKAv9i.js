const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DAQPE4qj.js","./DPsyiRpY.js","./entry.5sh4-81E.css","./Di5pOKFQ.js","./BTDi6Uru.js","./BIF_erWj.js","./VAvatar.CJWBDG6p.css","./VDivider.D4mQKusJ.css","./VDialog.Dn3KEzOw.css","./CciBiLYO.js","./CwiqMsm9.js","./BIQ7D7eS.js","./VSpacer.D0S0a0cH.css","./B2z7zkwD.js","./VCard.8Js4-u2y.css","./BLlDHa3x.js","./EYET6tSD.js","./VSheet.Cz4jQrPT.css","./DT-DMG7U.js","./DataTable.Baj7w4oj.css","./Dh2z9s9H.js"])))=>i.map(i=>d[i]);
import{d as X,bk as Z,r as g,J as E,I as ee,i as te,t as v,D as y,A as s,K as R,z as o,M as f,x as V,v as w,F as z,C as N,E as I,b7 as ae,b8 as le,y as _,G as S,Q as oe,B as C,b9 as ie,N as O,O as j,_ as se}from"./DPsyiRpY.js";import{R as ne}from"./EYET6tSD.js";import{u as re,V as ce,d as p,p as ue,j as de,n as h,A as b,r as P}from"./BTDi6Uru.js";import ve from"./Dh2z9s9H.js";import{V as G,g as me}from"./BIF_erWj.js";import{o as fe}from"./C8lrPfXD.js";import{b as pe}from"./CeIna3vb.js";import{V as L}from"./CwiqMsm9.js";import{a as ge}from"./BFBVYC-1.js";import{V as be,a as ke}from"./B2z7zkwD.js";import{V as ye}from"./CONCLCtq.js";import"./BIQ7D7eS.js";import"./D8ei0Eur.js";const _e={class:"bg-content"},Ce=["onClick"],he={class:"d-flex justify-space-between"},D=10,xe=X({__name:"MPFavs",setup(Ve){Z(l=>({"9e480f96":T.value}));const H=O({loader:()=>j(()=>import("./DAQPE4qj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)}),U=O({loader:()=>j(()=>import("./BLlDHa3x.js"),__vite__mapDeps([15,16,4,5,1,2,6,7,17,18,19,20]),import.meta.url)}),F=re(),n=ve(),i=g(1),T=g(1);function $(l){const e=Math.ceil(n.recipes.length/D);T.value=l!==e?D:n.recipes.length%D}$(i.value),E(i,l=>$(l));const Y=[{title:"名稱",key:"name",width:"150px"},{title:"總利潤",key:"profit"},{title:"加工時間(分鐘)",key:"time"},{title:"每小時產值",key:"hourlyProfit"},{title:"功能",key:"actions",sortable:!1,width:"100px"}].map(l=>({...l,align:"center",class:"bg-black"}));function A(){return n.recipes.map((l,e)=>{const t=n.hourly(e,2).reduce((r,u)=>(r.profit+=u.profitFromRaw,r.yield+=u.yieldFromRaw,r),{profit:0,yield:0}),a=n.timeCost(e);return{name:l.name,profit:h(n.allIncomes(e).tier2),time:h(a[0]+a[1]),hourlyProfit:h(t.profit),hourlyYield:h(t.yield)}})}const k=g(A());function B(){return n.recipes.map((l,e)=>{const t=(()=>{const[u,x]=n.timeCost(e);return[u,x,u+x]})(),a=n.hourly(e,1),r=n.allIncomes(e);return[{class:"text-grey-darken-1",textSize:"h6",label:"基本材料",value:""},{label:"出售利潤",value:r.raw},{label:"總數量",value:b(l.raw,"num")},{class:"mt-3 text-grey-darken-1",textSize:"h6",label:"一階加工",value:""},{label:"利潤",value:r.tier1},{label:"加工時間",value:`${P(t[0])}分鐘`},{label:"估計產量",value:b(l.tier1,"num")},{label:"每小時產值",value:b(a,"profit")},{label:"每小時產量",value:b(a,"yield")},{class:"mt-3 text-grey-darken-1",textSize:"h6",label:"二階加工",value:""},{label:"加工利潤",value:r.tier2},{label:"加工時間",value:`${P(t[1])}分鐘`},{label:"估計產量",value:b(l.tier2,"num")},{label:"從原料加工",value:`${P(t[0]+t[1])}分鐘`},{label:"每小時產值",value:k.value[e].hourlyProfit},{label:"每小時產量",value:k.value[e].hourlyYield}]})}const J=g(B());E(()=>[n.recipes,F.avgCraft,F.profitMargin],()=>{k.value=A(),J.value=B()},{deep:!0});const d=g(!1),c=ee({title:null,action:null,idx:null,callback:null}),M=l=>{l==="confirm"&&c.callback!==null&&c.callback(c.idx),d.value=!1},K=l=>{Object.assign(c,{title:"覆蓋表單?",action:"edit",idx:l,callback:n.overrideCurrent}),d.value=!0},Q=l=>{Object.assign(c,{title:"確定移除?",action:"del",idx:l,callback:n.removeFav}),d.value=!0},q=l=>{Object.assign(c,{title:"詳細資訊",action:"info",idx:l,callback:null}),d.value=!0},m=te(()=>c.action==="info"),W=[{tooltip:"編輯(覆蓋表單)",icon:"editable",callback:K},{tooltip:"刪除",icon:"delete",callback:Q},{tooltip:"詳細資訊",icon:"info",callback:q}];return(l,e)=>(v(),y(ye,{fluid:"",class:"d-flex"},{default:s(()=>[e[0]||(R(-1,!0),(e[0]=o(ne,{tag:"h3",title:"我的最愛",icon:"favorite",color:"title"})).cacheIndex=0,R(1),e[0]),o(fe,{class:"flex-1-1 bg-surface",headers:f(Y),items:k.value,page:i.value},{headers:s(t=>[V("tr",_e,[(v(!0),w(z,null,N(t.columns,a=>{var r,u;return v(),w("th",{key:a.title,class:I(["v-data-table-column--align-center","v-data-table__th","v-data-table__th--sortable",t.isSorted(a)?"v-data-table__th--sorted":""]),style:ae({width:a.width}),onClick:le(x=>t.toggleSort(a),["stop"])},[V("span",null,_(a.title),1),a.sortable!==!1?(v(),y(G,{key:0,class:"v-data-table-header__sort-icon sort-icon",icon:((r=t.sortBy[0])==null?void 0:r.key)===a.key&&((u=t.sortBy[0])==null?void 0:u.order)==="desc"?"mdi-arrow-down":"mdi-arrow-up"},null,8,["icon"])):S("",!0)],14,Ce)}),128))])]),"item.actions":s(({index:t})=>[V("div",he,[(v(),w(z,null,N(W,a=>o(pe,{key:a.icon,location:"top",eager:!1},{activator:s(({props:r})=>[o(G,oe({ref_for:!0},r,{icon:f(me)(a.icon),onClick:u=>a.callback(t)}),null,16,["icon","onClick"])]),default:s(()=>[C(" "+_(a.tooltip),1)]),_:2},1024)),64))])]),bottom:s(t=>[o(ce,{class:"bg-content rounded-b-lg",divided:""},{default:s(()=>[o(L),o(ge,{class:"flex-0-0 mr-2 align-self-center",density:"compact",variant:"plain",modelValue:t.page,items:[...Array(t.pageCount).keys()].map(a=>a+1),"onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a)},null,8,["modelValue","items"]),o(p,{icon:"mdi-page-first",variant:"text",size:"large",disabled:i.value===1,onClick:e[2]||(e[2]=a=>i.value=1)},null,8,["disabled"]),o(p,{icon:"mdi-chevron-left",variant:"text",disabled:i.value===1,onClick:a=>{i.value=f(ue)(i.value,t.pageCount)}},null,8,["disabled","onClick"]),o(p,{icon:"mdi-chevron-right",variant:"text",disabled:i.value===t.pageCount,onClick:a=>i.value=f(de)(i.value,t.pageCount)},null,8,["disabled","onClick"]),o(p,{icon:"mdi-page-last",variant:"text",disabled:i.value===t.pageCount,onClick:a=>i.value=t.pageCount},null,8,["disabled","onClick"])]),_:2},1024)]),_:1},8,["headers","items","page"]),d.value?(v(),y(f(H),{key:0,modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=t=>d.value=t),height:m.value?500:void 0},ie({title:s(()=>[o(be,{class:I(["font-weight-bold px-4 py-2 my-0",m.value?"bg-title":""])},{default:s(()=>[C(_(c.title),1)]),_:1},8,["class"])]),actions:s(()=>[o(L),o(p,{onClick:e[3]||(e[3]=t=>M("cancel"))},{default:s(()=>[C(_(m.value?"關閉":"取消"),1)]),_:1}),m.value?S("",!0):(v(),y(p,{key:0,onClick:e[4]||(e[4]=t=>M("confirm"))},{default:s(()=>e[6]||(e[6]=[C(" 確定 ")])),_:1}))]),_:2},[m.value?{name:"text",fn:s(()=>[o(ke,{class:I(["column-flow flex-1-1 ga-3 px-2 py-3 overflow-y-auto",m.value?"bg-content":""]),style:{height:"0"}},{default:s(()=>[o(f(U),{idx:c.idx??0},null,8,["idx"])]),_:1},8,["class"])]),key:"0"}:void 0]),1032,["modelValue","height"])):S("",!0)]),_:1}))}}),ze=Object.assign(se(xe,[["__scopeId","data-v-92bf0408"]]),{__name:"MassProcessingMPFavs"});export{ze as default};
