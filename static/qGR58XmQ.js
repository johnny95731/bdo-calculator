const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LWoSWI-m.js","./BORQtvDy.js","./Bo9Y2Pl6.js","./DXqIG5h6.js","./entry.5sh4-81E.css","./VAvatar.CJWBDG6p.css","./VDivider.D4mQKusJ.css","./CtYQB_ec.js","./BJJCbrzK.js","./BYk5bUkz.js","./VTooltip.DMbNlmg7.css","./BhludOfS.js","./Cvs29Zxg.js","./C6wayqaZ.js","./VMenu.C20d_WXR.css","./B-2XHWvZ.js","./VSlideGroup.BsYIg1rJ.css","./filter.BlnvcX2D.css","./VDataTable.CGRkVslf.css","./BC5ghwX7.js","./FH5iFDyH.js","./G5iCGz0r.js","./VSpacer.D0S0a0cH.css","./AlchemyFav.LLPXfEiT.css","./CKuGBf1L.js","./BUqNHsce.js","./BaAJO5sB.js","./VCombobox.fScBE-KD.css","./DDZGMRPx.js","./VLazy.CvH8ekHL.css"])))=>i.map(i=>d[i]);
import{d as re,i as C,t as p,v as g,C as B,F as P,D as O,A as n,E as pe,G as A,H as W,I as q,J as M,r as ce,x as k,K as m,z as l,L as be,M as o,B as T,N as F,O as H,y as ve,P as fe}from"./DXqIG5h6.js";import{u as ye,V as X,a as Z,b as U,c as ee,C as xe}from"./DDZGMRPx.js";import{E as ge,R as E,V as le}from"./TiEIOpVK.js";import te from"./DbQADFZB.js";import{D as J}from"./CqifZKDs.js";import se from"./BJJCbrzK.js";import{u as Ve,r,n as he,a as I,V as we,b as ae,c as oe,d as G}from"./BORQtvDy.js";import{u as Re,V as ke}from"./FH5iFDyH.js";import{V as y,a as Ce,b as L,c as Pe}from"./BYk5bUkz.js";const Se=re({__name:"AlchemyResult",props:{idx:{}},setup(K){const S=K,D=Ve(),V=se(),i=C(()=>S.idx===-1?V.current:V.recipes[S.idx]),s=C(()=>V.allIncomes(S.idx)),b=C(()=>V.cost(S.idx)),c=C(()=>V.hourly(S.idx)),_=C(()=>[{title:"總計",items:[{label:"利潤",value:r(s.value.total-b.value,0)},{label:"收入",value:r(s.value.total,0)},{label:"成本",value:r(b.value,0)},{label:"製作次數",value:`${he(i.value.crafts,0)} 次`},{label:"時間",value:`${r(i.value.timeCost)} 分鐘`},{label:"原料售出",value:r(s.value.raw,0)}]},{title:"一般產物",items:[{label:"收入",value:r(s.value.regular,0)},{label:"產量",value:r(i.value.num,0)}]},i.value.rareProd?{title:"稀有產物",items:[{label:"收入",value:r(s.value.rare,0)},{label:"產量",value:r(i.value.rareProd.num,2)}]}:void 0]),N=C(()=>{var d,f;const u=c.value;return[{title:"每小時總計",items:[{label:"利潤",value:r(u.profit+(((d=u.rareProd)==null?void 0:d.profit)??0)-u.cost,0)},{label:"收入",value:r(u.profit+(((f=u.rareProd)==null?void 0:f.profit)??0),0)},{label:"成本",value:r(u.cost,0)},{label:"製作",value:`${r(D.alchemyHourlyCrafts,0)} 次`}]},{title:"一般產物",items:[{label:"收入",value:r(u.profit,0)},{label:"產量",value:r(u.yield,0)}]},u.rareProd?{title:"稀有產物",items:[{label:"收入",value:r(u.rareProd.profit,0)},{label:"產量",value:r(u.rareProd.yield,0)}]}:void 0]}),z=C(()=>{if(!i.value.rareProd||!c.value.rareProd)return;const u=V.procToRare(i.value.num),d=(i.value.timeCost+u.timeCost)/60,f=i.value.rareProd.num+u.yield,x=D.profit(f*i.value.rareProd.price),w=b.value+u.cost,h=x-w;return[{title:"加工為稀有產物",items:[{label:"利潤",value:r(h,0)},{label:"收入",value:r(x,0)},{label:"成本",value:r(w,0)},{label:"加工成本",value:r(u.cost,0)},{label:"產量",value:r(f,0)},{label:"時間",value:`${r(V.current.timeCost+u.timeCost,1)} 分鐘`},{label:"加工時間",value:`${r(u.timeCost,1)} 分鐘`}]},{title:"每小時",items:[{label:"利潤",value:r(h/d,0)},{label:"收入",value:r(x/d,0)},{label:"成本",value:r(w/d,0)},{label:"產量",value:r(f/d,0)}]}]});return(u,d)=>(p(!0),g(P,null,B([_.value,N.value,z.value],(f,x)=>{var w;return p(),g(P,{key:x},[f?(p(),O(ge,{key:0,title:(w=f[0])==null?void 0:w.title,btnClass:"px-3 py-1 font-weight-bold",textClass:"px-3 pb-3 rounded-b-xl bg-surface",rounded:"xl",expand:""},{default:n(()=>[(p(!0),g(P,null,B(f,(h,$)=>(p(),g(P,{key:`${x}-${$}`},[h?(p(),O(J,{key:0,class:pe(["px-4 py-0",$?"my-1":"mt-n1 mb-1"]),title:h.title,titleClass:$?"ms-n4":"d-none",data:h.items},null,8,["class","title","titleClass","data"])):A("",!0)],64))),128))]),_:2},1032,["title"])):A("",!0)],64)}),128))}}),ne=Object.assign(Se,{__name:"AlchemyResult"}),Je=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),Te={class:"column-flow full-height"},Ue={class:"column-flow flex-1-1 ga-3 px-4 py-3"},Oe={class:"my-1"},Ae={class:"d-flex align-end ga-2"},$e={key:0,class:"ml-2 pl-2 py-2",style:{"border-left":"2px solid black"}},Ee={class:"column-flow flex-1-1 ga-3 px-2 py-3 overflow-y-auto",style:{height:"0"}},Ie={class:"my-4 pa-0 overflow-hidden rounded-t-xl rounded-b-lg"},Be={key:0,class:"ml-2 pl-2 py-2",style:{"border-left":"2px solid black"}},De=re({__name:"alchemy",setup(K){const S=F({loader:()=>H(()=>import("./LWoSWI-m.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)}),D=F({loader:()=>H(()=>import("./CtYQB_ec.js"),__vite__mapDeps([7,3,4,1,2,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),import.meta.url)}),V=F({loader:()=>H(()=>import("./CKuGBf1L.js"),__vite__mapDeps([24,25,13,3,4,1,2,5,6,14,26,12,9,10,15,16,17,27,28,20,21,22,29,0,8]),import.meta.url)});Re({title:"黑色沙漠交易所計算機 - 煉金",ogTitle:"黑色沙漠交易所計算機 - 煉金",description:"計算黑色沙漠中煉金及產生的利潤、時間以及產量等，並可透過產物需求量估計原料需求量。",ogDescription:"計算黑色沙漠中煉金及產生的利潤、時間以及產量等，並可透過產物需求量估計原料需求量。"});const i=se(),{current:s}=W(i),b=q((()=>{const a={show:!!(s.value.rareProd||I.elixir.rareProd),...s.value.rareProd??I.elixir.rareProd};return a.num!==void 0&&delete a.num,a})());M(b,a=>{if(!a.show){i.updateRareProd();return}i.updateRareProd({price:a.price?+a.price:0,rate:a.rate?+a.rate:0})}),M(()=>s.value.rareProd,a=>{Object.assign(b,{show:!!a}),a&&Object.assign(b,{price:a.price,rate:a.rate})},{deep:!0});const c=q({show:!1,type:"example",data:"reagent",callback:()=>{}});function _(a,e){Object.assign(c,{show:!0,type:a,data:e,callback:a==="save"?u:z})}const N=[{text:"範例一",tooltip:I.reagent.name,target:"reagent"},{text:"範例二",tooltip:I.elixir.name,target:"elixir"}];function z(){i.overrideCurrent(c.data),Object.assign(c,{show:!1})}function u(){s.value.name&&(i.saveRecipe(),Object.assign(c,{show:!1}))}const d=q({show:!1,crafts:s.value.crafts});M(()=>s.value.crafts,a=>Object.assign(d,{crafts:a}));const f={title:{name:"名稱"},value:{name:"需求量"}},x=ce(s.value.raw.map(a=>({label:a.name,value:s.value.crafts*a.consumption}))),w=()=>{x.value=s.value.raw.map(a=>({label:a.name,value:d.crafts*a.consumption}))};M(()=>d.crafts,(a,e)=>a!==e&&w());const h=()=>{Object.assign(d,{show:!d.show}),d.show||i.setCrafts(x.value.map(a=>a.value))},$=ye(),{alchemy:v,alchemyReqRaw:ie,alchemyCrafts:ue}=W($),de=C(()=>ie.value.map((a,e)=>({label:`原料${e+1}`,value:a})));return(a,e)=>(p(),g(P,null,[k("section",Te,[e[0]||(m(-1,!0),(e[0]=l(E,{tag:"h2",title:"煉金",icon:"alchemy",color:"alchemy"})).cacheIndex=0,m(1),e[0]),l(X,{class:"flex-1-1 h-100 bg-alchemy-lighten-2"},{default:n(()=>[l(U,{class:"h-100 column-flow",cols:2},{default:n(()=>[e[1]||(m(-1,!0),(e[1]=l(E,{tag:"h3",title:"配方",color:"alchemy-lighten-1",rounded:"0"})).cacheIndex=1,m(1),e[1]),k("div",Ue,[l(le,{class:"px-3 py-4",rounded:"xl"},{default:n(()=>[l(y,{class:"mb-3",label:"名稱",dirty:"",density:"compact","model-value":o(s).name,"onUpdate:modelValue":e[2]||(e[2]=t=>o(i).updateRecipe("name",t))},null,8,["model-value"]),l(y,{class:"my-3",label:"出售價",type:"number",inputmode:"decimal",min:"0",density:"compact","model-value":o(s).price,"onUpdate:modelValue":e[3]||(e[3]=t=>o(i).updateRecipe("price",t))},null,8,["model-value"]),k("div",Oe,[e[4]||(m(-1,!0),(e[4]=l(Ce,{class:"d-block text-caption mb-n2"},{default:n(()=>[e[27]||(e[27]=T(" 產量範圍 "))]),_:1})).cacheIndex=4,m(1),e[4]),k("div",Ae,[l(y,{class:"flex-1-1-100",label:"最小值","single-line":"",type:"number",inputmode:"decimal",min:"0",density:"compact",max:o(s).yieldRange[1],"model-value":o(s).yieldRange[0],"onUpdate:modelValue":e[5]||(e[5]=t=>o(i).updateRecipe("yieldRange",t,0))},null,8,["max","model-value"]),e[28]||(e[28]=T(" ~ ")),l(y,{class:"flex-1-1-100",label:"最大值","single-line":"",type:"number",inputmode:"decimal",density:"compact",min:o(s).yieldRange[0],"model-value":o(s).yieldRange[1],"onUpdate:modelValue":e[6]||(e[6]=t=>o(i).updateRecipe("yieldRange",t,1))},null,8,["min","model-value"])])]),l(ee,{modelValue:b.show,"onUpdate:modelValue":e[7]||(e[7]=t=>b.show=t),class:"ms-n1 mb-n1",label:"稀有產物",density:"compact",ripple:!1},null,8,["modelValue"]),l(ae,null,{default:n(()=>[b.show?(p(),g("div",$e,[l(y,{modelValue:b.rate,"onUpdate:modelValue":e[8]||(e[8]=t=>b.rate=t),class:"mb-3",label:"稀有產物比例",type:"number",min:"0",step:"0.01",density:"compact"},{default:n(()=>[l(L,{activator:"parent",location:"top",text:"取決於製作次數"})]),_:1},8,["modelValue"]),l(y,{label:"售出價",type:"number",inputmode:"decimal",min:"0",density:"compact","model-value":b.price,"onUpdate:modelValue":e[9]||(e[9]=t=>b.price=t)},null,8,["model-value"])])):A("",!0)]),_:1})]),_:1})])]),_:1}),e[10]||(m(-1,!0),(e[10]=l(oe,{vertical:"",thickness:"2",opacity:"1",color:"surface"})).cacheIndex=10,m(1),e[10]),l(U,{class:"column-flow h-100"},{default:n(()=>[e[11]||(m(-1,!0),(e[11]=l(E,{tag:"h3",title:"原料",color:"alchemy-lighten-1",rounded:"0"})).cacheIndex=11,m(1),e[11]),l(le,{class:"flex-1-1 px-4 bg-transparent text-center"},{default:n(()=>[(p(!0),g(P,null,B(o(s).raw,(t,R)=>(p(),O(o(V),{key:R,idx:R,raw:t},null,8,["idx","raw"]))),128)),l(xe,{type:"append",disabled:o(s).raw.length>=5,onClick:o(i).appendRaw},null,8,["disabled","onClick"])]),_:1})]),_:1}),e[12]||(m(-1,!0),(e[12]=l(oe,{vertical:"",thickness:"3",opacity:"1",color:"surface"})).cacheIndex=12,m(1),e[12]),l(U,{class:"column-flow h-100",cols:"3"},{default:n(()=>[e[13]||(m(-1,!0),(e[13]=l(E,{tag:"h3",title:"結果",color:"alchemy-lighten-1",rounded:"0"})).cacheIndex=13,m(1),e[13]),k("div",Ee,[l(ne,{idx:-1})])]),_:1})]),_:1}),e[14]||(m(-1,!0),(e[14]=l(we,{class:"flex-0-0 ga-5 px-4 py-2 bg-alchemy",variant:"text",rounded:"b-lg t-0"},{default:n(()=>[(p(),g(P,null,B(N,t=>l(G,{key:t.target,"prepend-icon":"mdi-broom",rounded:"lg",onClick:R=>_("example",t.target)},{default:n(()=>[T(ve(t.text)+" ",1),t.tooltip?(p(),O(L,{key:0,text:t.tooltip,activator:"parent",location:"bottom"},null,8,["text"])):A("",!0)]),_:2},1032,["onClick"])),64)),l(ke),l(G,{"prepend-icon":"mdi-knob",density:"compact",rounded:"lg",variant:"elevated","base-color":"alchemy-darken-1",onClick:h},{default:n(()=>e[29]||(e[29]=[T(" 製作次數 ")])),_:1}),l(G,{"prepend-icon":"mdi-file",density:"compact",rounded:"lg",variant:"elevated","base-color":"alchemy-darken-1",disabled:!o(s).name,onClick:t=>_("save")},{default:n(()=>e[30]||(e[30]=[T(" 儲存 ")])),_:1},8,["disabled","onClick"])]),_:1})).cacheIndex=14,m(1),e[14]),c.show?be([c.show],()=>(p(),O(te,{key:0,modelValue:c.show,"onUpdate:modelValue":e[15]||(e[15]=t=>c.show=t),title:c.type==="save"?"儲存最愛":"覆蓋表單?",text:c.type==="save"?void 0:`範例 ${o(I)[c.data].name}`,onConfirm:e[16]||(e[16]=t=>c.callback())},null,8,["modelValue","title","text"])),e,17):A("",!0),l(te,{title:"製作次數","model-value":d.show,eager:!0,"onUpdate:modelValue":h},{default:n(()=>[l(J,{class:"pa-0",headers:f,data:x.value,"label-width":10},null,8,["data"]),l(y,{modelValue:d.crafts,"onUpdate:modelValue":e[18]||(e[18]=t=>d.crafts=t),class:"pt-4",label:"製作次數",type:"number",inputmode:"decimal",min:"0",density:"compact"},null,8,["modelValue"])]),_:1},8,["model-value"])]),l(Z,{tag:"section","min-height":400,options:{threshold:.5},transition:void 0},{default:n(()=>[l(o(D),{class:"full-height column-flow"})]),_:1}),l(Z,{class:"v-container pa-0",tag:"section","min-height":100,options:{threshold:1},transition:"fade-transition"},{default:n(()=>[k("div",Ie,[e[19]||(m(-1,!0),(e[19]=l(E,{tag:"h3",title:"原料需求估計",icon:"mdi-calculator-variant-outline",color:"title"})).cacheIndex=19,m(1),e[19]),l(X,{class:"h-100 justify-center bg-surface px-2 py-2 ga-4 bg-content"},{default:n(()=>[l(U,{class:"px-5 pt-4 pb-2 rounded-xl bg-surface",cols:"3"},{default:n(()=>[e[32]||(e[32]=k("label",{class:"font-weight-bold d-block mb-3"}," 期望產物量 ",-1)),l(y,{modelValue:o(v).demand.regular,"onUpdate:modelValue":e[20]||(e[20]=t=>o(v).demand.regular=t),modelModifiers:{number:!0},label:"一般產物",density:"compact",type:"number",inputmode:"decimal",dirty:"",min:"1"},null,8,["modelValue"]),l(ee,{modelValue:o(v).hasRare,"onUpdate:modelValue":e[21]||(e[21]=t=>o(v).hasRare=t),class:"ms-n1 mb-n1",label:"稀有產物",density:"compact"},null,8,["modelValue"]),l(ae,null,{default:n(()=>[o(v).hasRare?(p(),g("div",Be,[l(y,{modelValue:o(v).demand.rare,"onUpdate:modelValue":e[22]||(e[22]=t=>o(v).demand.rare=t),modelModifiers:{number:!0},class:"mb-3",label:"稀有產物",density:"compact",type:"number",inputmode:"decimal",dirty:"",min:"1"},null,8,["modelValue"]),l(y,{modelValue:o(v).rareRate,"onUpdate:modelValue":e[23]||(e[23]=t=>o(v).rareRate=t),modelModifiers:{number:!0},class:"mb-2",label:"稀有產物比例",density:"compact",type:"number",inputmode:"decimal",dirty:"",min:"0",step:"0.01"},{default:n(()=>[l(L,{activator:"parent",location:"top",text:"取決於製作次數"})]),_:1},8,["modelValue"]),l(Pe,{id:"to-rare",modelValue:o(v).toRare,"onUpdate:modelValue":e[24]||(e[24]=t=>o(v).toRare=t),class:"ms-n1 mb-n2",label:"全製作為稀有產物",density:"compact"},{label:n(()=>[e[31]||(e[31]=T(" 全製作為稀有產物 ")),l(L,{activator:"parent",location:"top",text:"忽略一般產物數量要求"})]),_:1},8,["modelValue"])])):A("",!0)]),_:1})]),_:1}),l(U,{class:"px-5 pt-4 pb-2 rounded-xl bg-surface",cols:"3"},{default:n(()=>[e[33]||(e[33]=k("label",{class:"font-weight-bold d-block mb-3"}," 原料消耗量 ",-1)),(p(!0),g(P,null,B(o(v).raw,(t,R,_e,j)=>{const Y=[t];if(j&&j.key===R&&fe(j,Y))return j;const Q=(p(),O(y,{key:R,class:"mb-4",label:`原料${R+1}`,density:"compact",type:"number",inputmode:"decimal",min:"1","model-value":t,"onUpdate:modelValue":me=>o(v).raw[R]=+me},null,8,["label","model-value","onUpdate:modelValue"]));return Q.memo=Y,Q},e,25),128))]),_:1}),l(U,{class:"text-subtitle-2 px-5 py-3 rounded-xl bg-surface",cols:"3"},{default:n(()=>[l(o(S),{title:"製作次數",value:o(ue)},null,8,["value"]),l(J,{class:"mt-2 ml-3",title:"原料需求量",titleClass:"text-body-1 font-weight-bold ms-n3",itemSize:"body-1",data:de.value},null,8,["data"])]),_:1})]),_:1})])]),_:1})],64))}}),Ke=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"}));export{Je as A,Ke as a};
