const __vite__fileDeps=["./RegionHeader-Bjj0QJ2e.js","./ExpansionPanel-BW-gqJtl.js","./index-CyQvApnK.js","./index-CJRCcq6m.css","./ExpansionPanel-BqEw9TtZ.css","./TheDialog-CzgpP-Bg.js","./TheDialog.vue_vue_type_script_setup_true_lang-Di-3ecDA.js","./VDialog-6Fd2q5zs.js","./VDialog-CSuU2VW-.css","./AlchemyResult-1O2gULut.js","./TheAlchemy-XVAX-1jw.js","./VLazy-_ZqY908O.js","./VTooltip-BOZ_ktLx.js","./VTooltip-03dTmztU.css","./VLazy-CMKdyl0R.css","./DataTable-PPssR5ae.js","./DataTable-CJ7D-dFE.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{J as De,O as Be,aa as p,h as O,X as te,aE as Pe,_ as Ce,b as o,a7 as M,m as T,d as Re,g as Ee,ak as Fe,C as Ae,D as Oe,a9 as Ge,o as u,j as k,v as ae,k as V,w as d,a as w,F as q,E as J,bw as le,n as R,bx as oe,t as I,c as E,l as K,I as F,p as He,e as A,by as Ne,bq as Le,bp as $e,af as je,Z as se,ai as W,aj as X,A as _,bA as ze,bB as Ue}from"./index-CyQvApnK.js";import{V as Me}from"./VTooltip-BOZ_ktLx.js";import{m as qe,a as Je,c as Ke,b as We,d as Xe,u as Ye,p as Ze,e as Qe,f as et,g as tt,h as at,i as lt,j as ot,k as re,l as ie,n as ne,o as st}from"./VDataTable-dodxSJ7s.js";import{m as rt,b as it,u as nt,c as dt,d as ct}from"./filter-BvXrCLne.js";import{a as ut}from"./ExpansionPanel-BW-gqJtl.js";const mt=De({...qe(),...Je(),...rt(),...it()},"VDataTableVirtual"),ht=Be()({name:"VDataTableVirtual",props:mt(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,G){let{attrs:H,slots:a}=G;const{groupBy:b}=Ke(e),{sortBy:n,multiSort:N,mustSort:D}=We(e),{columns:f,headers:i,filterFunctions:B,sortFunctions:L,sortRawFunctions:$}=Xe(e,{groupBy:b,showSelect:p(e,"showSelect"),showExpand:p(e,"showExpand")}),{items:j}=Ye(e,f),m=p(e,"search"),{filteredItems:z}=nt(e,j,m,{transform:h=>h.columns,customKeyFilter:B}),{toggleSort:s}=Ze({sortBy:n,multiSort:N,mustSort:D}),{sortByWithGroups:r,opened:l,extractRows:t,isGroupOpen:c,toggleGroup:v}=Qe({groupBy:b,sortBy:n}),{sortedItems:x}=et(e,z,r,{transform:h=>h.columns,sortFunctions:L,sortRawFunctions:$}),{flatItems:P}=tt(x,b,l),C=O(()=>t(P.value)),{isSelected:de,select:ce,selectAll:ue,toggleSelect:me,someSelected:he,allSelected:ve}=at(e,{allItems:C,currentPage:C}),{isExpanded:ye,toggleExpand:be}=lt(e),{containerRef:fe,markerRef:pe,paddingTop:ge,paddingBottom:ke,computedItems:_e,handleItemResize:we,handleScroll:xe,handleScrollend:Se}=dt(e,P),Ve=O(()=>_e.value.map(h=>h.raw));ot({sortBy:n,page:te(1),itemsPerPage:te(-1),groupBy:b,search:m}),Pe({VDataTableRows:{hideNoData:p(e,"hideNoData"),noDataText:p(e,"noDataText"),loading:p(e,"loading"),loadingText:p(e,"loadingText")}});const S=O(()=>({sortBy:n.value,toggleSort:s,someSelected:he.value,allSelected:ve.value,isSelected:de,select:ce,selectAll:ue,toggleSelect:me,isExpanded:ye,toggleExpand:be,isGroupOpen:c,toggleGroup:v,items:C.value.map(h=>h.raw),internalItems:C.value,groupedItems:P.value,columns:f.value,headers:i.value}));Ce(()=>{const h=re.filterProps(e),Ie=ie.filterProps(e),Te=ne.filterProps(e);return o(ne,T({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Te),{top:()=>{var y;return(y=a.top)==null?void 0:y.call(a,S.value)},wrapper:()=>{var y,Y,Z;return o("div",{ref:fe,onScrollPassive:xe,onScrollend:Se,class:"v-table__wrapper",style:{height:M(e.height)}},[o("table",null,[(y=a.colgroup)==null?void 0:y.call(a,S.value),!e.hideDefaultHeader&&o("thead",{key:"thead"},[o(re,T(h,{sticky:e.fixedHeader}),a)]),!e.hideDefaultBody&&o("tbody",null,[o("tr",{ref:pe,style:{height:M(ge.value),border:0}},[o("td",{colspan:f.value.length,style:{height:0,border:0}},null)]),(Y=a["body.prepend"])==null?void 0:Y.call(a,S.value),o(ie,T(H,Ie,{items:Ve.value}),{...a,item:g=>o(ct,{key:g.internalItem.index,renderless:!0,"onUpdate:height":U=>we(g.internalItem.index,U)},{default:U=>{var ee;let{itemRef:Q}=U;return((ee=a.item)==null?void 0:ee.call(a,{...g,itemRef:Q}))??o(st,T(g.props,{ref:Q,key:g.internalItem.index,index:g.internalItem.index}),a)}})}),(Z=a["body.append"])==null?void 0:Z.call(a,S.value),o("tr",{style:{height:M(ke.value),border:0}},[o("td",{colspan:f.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var y;return(y=a.bottom)==null?void 0:y.call(a,S.value)}})})}}),vt=e=>(ze("data-v-b0d885b5"),e=e(),Ue(),e),yt=["colspan","rowSpan","onClick"],bt=["onClick"],ft={class:"d-flex justify-space-between"},pt=vt(()=>w("div",{class:"bg-content rounded-b-lg",style:{"min-height":"40px"}},null,-1)),gt=Re({__name:"AlchemyFav",setup(e){const G=W({loader:()=>X(()=>import("./RegionHeader-Bjj0QJ2e.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)}),H=W({loader:()=>X(()=>import("./TheDialog-CzgpP-Bg.js"),__vite__mapDeps([5,6,7,2,3,8]),import.meta.url)}),a=W({loader:()=>X(()=>import("./AlchemyResult-1O2gULut.js"),__vite__mapDeps([9,10,2,3,11,12,13,14,1,4,6,7,8,15,16]),import.meta.url)}),b=Ee(),n=Fe(),N=[{title:"名稱",key:"name",width:"150px"},{title:"利潤",key:"profit"},{title:"產量",width:"210px",children:[{title:"一般產物",key:"yield.regular",width:"90px"},{title:"稀有產物",key:"yield.rare",width:"90px"}]},{title:"製作時間(分鐘)",key:"time"},{title:"每小時產值",key:"hourlyProfit"},{title:"功能",key:"actions",sortable:!1,width:"100px"}].map(s=>(s.children&&s.children.forEach(r=>r.align="center"),{...s,align:"center"}));function D(){return n.recipes.map((s,r)=>{var c;const l=n.hourly(r),t=n.cost(r);return{name:s.name,profit:_(n.allIncomes(r).total-t,0),time:_(s.timeCost,0),yield:{regular:_(s.num,1),rare:s.rareProd?_(s.rareProd.num,1):null},hourlyProfit:_(l.profit+(((c=l.rareProd)==null?void 0:c.profit)??0)-l.cost,0),hourlyYield:_(l.yield,0)}})}const f=Ae(D());Oe(()=>[n.recipes,b.alchemy,b.profitMargin],()=>{f.value=D()},{deep:!0});const i=Ge({activity:!1,title:null,action:null,idx:null,callback:null}),B=s=>{s==="confirm"&&i.callback!==null&&i.callback(i.idx),Object.assign(i,{activity:!1})},L=s=>{Object.assign(i,{activity:!0,title:"覆蓋表單?",action:"edit",idx:s,callback:n.overrideCurrent})},$=s=>{Object.assign(i,{activity:!0,title:"確定移除?",action:"del",idx:s,callback:n.removeRecipe})},j=s=>{Object.assign(i,{activity:!0,title:"詳細資訊",action:"info",idx:s,callback:null})},m=O(()=>i.action==="info"),z=[{tooltip:"編輯(覆蓋表單)",icon:"editable",callback:L},{tooltip:"刪除",icon:"delete",callback:$},{tooltip:"詳細資訊",icon:"info",callback:j}];return(s,r)=>(u(),k("div",null,[r[0]||(ae(-1),r[0]=o(V(G),{tag:"h3",title:"我的最愛",icon:"favorite",color:"title"}),ae(1),r[0]),o(ht,{class:"flex-1-1 h-0 bg-surface",headers:V(N),items:f.value,"fixed-header":"",hover:""},{headers:d(l=>[w("tr",null,[(u(!0),k(q,null,J(l.headers[0],(t,c)=>{var v,x;return u(),k("th",{key:t.title,colspan:t.children?2:1,rowSpan:t.children?1:2,onClick:le(P=>l.toggleSort(t),["stop"]),class:R(["v-data-table-column--align-center","v-data-table__th","v-data-table__th--sortable",l.isSorted(t)?"v-data-table__th--sorted":"","header-item bg-content"]),style:oe({width:t.width,borderLeft:c===0?"none":void 0})},[w("span",null,I(t.title),1),t.sortable!==!1?(u(),E(K,{key:0,class:"v-data-table-header__sort-icon sort-icon",icon:((v=l.sortBy[0])==null?void 0:v.key)===t.key&&((x=l.sortBy[0])==null?void 0:x.order)==="desc"?"mdi-arrow-down":"mdi-arrow-up"},null,8,["icon"])):F("",!0)],14,yt)}),128))]),w("tr",null,[(u(!0),k(q,null,J(l.headers[1],t=>{var c,v;return u(),k("th",{key:t.title,colspan:"1",rowSpan:1,onClick:le(x=>l.toggleSort(t),["stop"]),class:R(["v-data-table-column--align-center","v-data-table__th","v-data-table__th--sortable",l.isSorted(t)?"v-data-table__th--sorted":"","header-item bg-content"]),style:oe({width:t.width})},[w("span",null,I(t.title),1),t.sortable!==!1?(u(),E(K,{key:0,class:"v-data-table-header__sort-icon sort-icon",icon:((c=l.sortBy[0])==null?void 0:c.key)===t.key&&((v=l.sortBy[0])==null?void 0:v.order)==="desc"?"mdi-arrow-down":"mdi-arrow-up"},null,8,["icon"])):F("",!0)],14,bt)}),128))])]),"item.actions":d(({index:l})=>[w("div",ft,[(u(),k(q,null,J(z,t=>o(Me,{key:t.icon,location:"top",eager:!1},{activator:d(({props:c})=>[o(K,T(c,{icon:V(He)(t.icon),onClick:v=>t.callback(l)}),null,16,["icon","onClick"])]),default:d(()=>[A(" "+I(t.tooltip),1)]),_:2},1024)),64))])]),bottom:d(()=>[pt]),_:1},8,["headers","items"]),i.activity?(u(),E(V(H),{key:0,modelValue:i.activity,"onUpdate:modelValue":r[3]||(r[3]=l=>i.activity=l),height:m.value?500:void 0},Ne({title:d(()=>[o($e,{class:R(["font-weight-bold px-4 py-2 my-0",m.value?"bg-title":""])},{default:d(()=>[A(I(i.title),1)]),_:1},8,["class"])]),actions:d(()=>[o(je),o(se,{onClick:r[1]||(r[1]=l=>B("cancel"))},{default:d(()=>[A(I(m.value?"關閉":"取消"),1)]),_:1}),m.value?F("",!0):(u(),E(se,{key:0,onClick:r[2]||(r[2]=l=>B("confirm"))},{default:d(()=>[A(" 確定 ")]),_:1}))]),_:2},[m.value?{name:"text",fn:d(()=>[o(Le,{class:R(["column-flow flex-1-1 ga-3 px-2 py-3 overflow-y-auto",m.value?"bg-content":""]),style:{height:"0"}},{default:d(()=>[o(V(a),{idx:i.idx??0},null,8,["idx"])]),_:1},8,["class"])]),key:"0"}:void 0]),1032,["modelValue","height"])):F("",!0)]))}}),Vt=ut(gt,[["__scopeId","data-v-b0d885b5"]]);export{Vt as default};
